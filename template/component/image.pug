-// Copyright (C) 2020 eth-p

mixin image(asset)
	- const data = (typeof asset === 'string' && asset.startsWith('asset:')) ? assets[asset.substring(6)] : asset;

	if data == null
		span
			| #{attributes.alt == null ? "\u26A0" : attributes.alt}&nbsp;
	
	else if typeof data === 'string'
		img(src=data)&attributes(attributes)
	
	else
		if data.type === 'svg'
			object(role="img" aria-label=attributes.alt)&attributes(attributes)
				| !{data.contents.toString()}
		else
			img(src=`data:image/${data.type};base64,${data.contents.toString('base64')}`)&attributes(attributes)
